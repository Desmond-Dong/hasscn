"use strict";(self.webpackChunkhasscn=self.webpackChunkhasscn||[]).push([["202"],{992:function(e,n,s){s.r(n),s.d(n,{default:()=>t});var r=s(5893),c=s(65);function i(e){let n=Object.assign({h1:"h1",a:"a",h3:"h3",blockquote:"blockquote",p:"p",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",pre:"pre",code:"code",ul:"ul",li:"li"},(0,c.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"home-assistant-supervised-in-docker",children:["Home Assistant Supervised in Docker",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#home-assistant-supervised-in-docker",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"此版本修改作者alone",children:["此版本修改作者：",(0,r.jsx)(n.a,{href:"https://anlo.ng/",target:"_blank",rel:"noopener noreferrer",children:"Alone"}),(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#此版本修改作者alone",children:"#"})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["通过Docker安装",(0,r.jsx)(n.a,{href:"https://github.com/hasscc/supervised-installer",target:"_blank",rel:"noopener noreferrer",children:"Home Assistant Supervised"})," (HassIO)，并对国内网络环境进行优化"]}),"\n"]}),"\n",(0,r.jsxs)(n.table,{children:["\n",(0,r.jsxs)(n.thead,{children:["\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.th,{align:"center",children:"　　　"}),"\n",(0,r.jsx)(n.th,{align:"center",children:"HAOS"}),"\n",(0,r.jsx)(n.th,{align:"center",children:"Supervised"}),"\n",(0,r.jsx)(n.th,{align:"center",children:"Container"}),"\n",(0,r.jsx)(n.th,{align:"center",children:"Core"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.tbody,{children:["\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{align:"center",children:"自动化"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{align:"center",children:"仪表盘"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{align:"center",children:"集　成"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{align:"center",children:"加载项"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"❌"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"❌"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{align:"center",children:"升　级"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"❌"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"❌"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{align:"center",children:"备　份"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n",(0,r.jsx)(n.td,{align:"center",children:"✅"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"compose-安装",children:["Compose 安装",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#compose-安装",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"HASSIO=/usr/share/hassio\nmkdir -p $HASSIO\ncd $HASSIO\nwget https://ghrp2.hacs.vip/raw/hasscc/hass-super/main/compose.yml\ndocker compose up -d\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"/usr/share/hassio"}),"用于存储HassIO数据，包括HA配置及Add-ons配置等，可更改为其他路径"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"compose.yml"}),"中的",(0,r.jsx)(n.code,{children:"docker_lib"}),"用于存储HassIO容器及镜像等数据，会占用较大的空间，且对存储驱动有特殊要求，不要挂载到本地目录"]}),"\n",(0,r.jsxs)(n.p,{children:["仅当",(0,r.jsx)(n.code,{children:"DEFAULT_TZ=Asia/Shanghai"}),"时才会对国内网络环境进行优化"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"命令安装",children:["命令安装",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#命令安装",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# 新建用于存储容器及镜像等数据的卷，对存储驱动有特殊要求，因此不能挂载到本地目录\ndocker volume create hass_super_docker\n\n# 运行容器\ndocker run -d \\\n  --name hass-super \\\n  -v /usr/share/hassio:/usr/share/hassio \\\n  -v /run/dbus:/run/dbus:ro \\\n  -v hass_super_docker:/var/lib/docker \\\n  -e DEFAULT_TZ=Asia/Shanghai \\\n  --device /dev/net/tun \\\n  --restart unless-stopped \\\n  --network host \\\n  --hostname hassio \\\n  --privileged \\\n  ghcr.nju.edu.cn/hasscc/hass-super\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"首次安装时，需要较长时间安装环境及拉取镜像，请耐心等待"}),"\n",(0,r.jsxs)(n.p,{children:["通过",(0,r.jsx)(n.code,{children:"http://192.168.xx.xx:4357"}),"可以查看系统状态"]}),"\n",(0,r.jsxs)(n.p,{children:["通过",(0,r.jsx)(n.code,{children:"http://192.168.xx.xx:8123"}),"进入Home Assistant"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"问题排查",children:["问题排查",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#问题排查",children:"#"})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["如果提示无网络连接",(0,r.jsx)(n.code,{children:"no host internet connection"}),"，请尝试在",(0,r.jsx)(n.a,{href:"https://my.home-assistant.io/redirect/network/",target:"_blank",rel:"noopener noreferrer",children:"网络配置"}),"中禁用IPv6"]}),"\n",(0,r.jsx)(n.p,{children:"如果安装后超过10分钟仍然无法进入Home Assistant，请尝试执行以下命令查看日志"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec -it hass-super tail -f /tmp/hassio.log -n 500\ndocker exec -it hass-super journalctl -f -u docker -n 100\ndocker exec -it hass-super journalctl -f -u hassio-supervisor -n 200\ndocker exec -it hass-super docker logs -f hassio_supervisor\ndocker exec -it hass-super ha core info\ndocker exec -it hass-super ha core start\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"鸣谢",children:["鸣谢",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#鸣谢",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://doc.nju.edu.cn/books/e1654/page/ghcr",target:"_blank",rel:"noopener noreferrer",children:"NJU Mirror"})}),"\n"]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,c.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(i,{...e})}):i(e)}let t=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["Supervised_Docker.md"]={toc:[{text:"此版本修改作者：Alone",id:"此版本修改作者alone",depth:3},{text:"Compose 安装",id:"compose-安装",depth:3},{text:"命令安装",id:"命令安装",depth:3},{text:"问题排查",id:"问题排查",depth:3},{text:"鸣谢",id:"鸣谢",depth:3}],title:"Home Assistant Supervised in Docker",headingTitle:"Home Assistant Supervised in Docker",frontmatter:{}}}}]);
---
layout: doc
---

# ğŸ  Home Assistant é’ˆå¯¹å›½äººä¼˜åŒ–å„ç§æé€Ÿç‰ˆ

> ğŸŒˆ ä¸“ä¸ºä¸­å›½ç”¨æˆ·æ‰“é€ ï¼Œå½»åº•è§£å†³å› ç½‘ç»œå¯¼è‡´çš„ä½¿ç”¨å›°éš¾

## **ğŸ¯ Home Assistant OS æé€Ÿç‰ˆ**

> **âš ï¸ æ³¨æ„ï¼š** æ—¢ç„¶æ˜¯å…¬æµ‹ç‰ˆï¼Œè‚¯å®šæ˜¯è¿˜æœ‰ä¸€äº›ä¸å¤ªç¡®å®šçš„ **bug** å­˜åœ¨ï¼Œè¯·å‹¿å½“æ­£å¼ç‰ˆä½¿ç”¨ï¼

å¦‚é‡åˆ° bugï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼åé¦ˆï¼š
- åœ¨å¾®ä¿¡ä¸­ç•™è¨€
- åœ¨ GitHub ä¸Šæ [issue](https://github.com/ha-china/HAOS-CN/issues)


### âœ¨ æ ¸å¿ƒäº®ç‚¹

#### ğŸ› ï¸ åŸæ±åŸå‘³çš„å®˜æ–¹ä½“éªŒ
- ğŸŸ¢ 100% ä¿ç•™å®˜æ–¹æºä»£ç 
- ğŸš€ ä»…ä¼˜åŒ–å‡çº§é•œåƒåœ°å€ä¸ºä¸­å›½å¯è®¿é—®èŠ‚ç‚¹

#### ğŸ“š HACS æé€Ÿç‰ˆ [Alone](https://anlo.ng/)
- âš¡ å†…ç½® HACS æé€Ÿç‰ˆï¼Œé›†æˆå®‰è£…é›¶æŠ¥é”™
- ğŸ” æ”¯æŒåœ¨é›†æˆä¸­ç›´æ¥æœç´¢æ·»åŠ  HACS
- ğŸ‡¨ğŸ‡³ [Gitee æº](https://gitee.com/hacs-china/)


#### ğŸ“± æµ·é‡åŠ è½½é¡¹æ”¯æŒ
- ğŸ“¦ å†…ç½® 400+ ä¸­å›½ç‰ˆåŠ è½½é¡¹
- ğŸ–±ï¸ ä¸€é”®å®‰è£…ï¼Œæµç•…å‡çº§
- âœ… å½»åº•è§£å†³ï¼š
  - ğŸŒ ç½‘ç»œé—®é¢˜å¯¼è‡´çš„å®‰è£…å¤±è´¥
  - ğŸ—‘ï¸ ç³»ç»Ÿè¯¯åˆ åŠ è½½é¡¹
- ğŸ”— è®¿é—®åœ°å€ï¼š[åŠ è½½é¡¹ä»“åº“](https://gitee.com/desmond_GT/hassio-addons)

#### ğŸ“… æ™ºèƒ½æ›´æ–°ç­–ç•¥
- ğŸ—“ï¸ æ¯æœˆ 28 æ—¥ç»Ÿä¸€æ›´æ–°ç‰ˆæœ¬
- ğŸ›¡ï¸ é¿å…æœˆåˆæ›´æ–°å¯¼è‡´çš„é›†æˆé—®é¢˜
- â³ æ¯”å®˜æ–¹ç‰ˆæœ¬å»¶è¿Ÿçº¦ 1 ä¸ªæœˆï¼Œç¡®ä¿ç¨³å®šæ€§
- ğŸ“ æ”¯æŒæ ¹æ®ç”¨æˆ·åé¦ˆè°ƒæ•´æ›´æ–°é¢‘ç‡

#### ğŸ’» æé€Ÿåœ¨çº¿å‡çº§
- âš¡ åˆå§‹åŒ–ä¸åœ¨çº¿å‡çº§å…¨é¢ä¼˜åŒ–
- ğŸ•’ å‘Šåˆ«æ¼«é•¿ç­‰å¾…ï¼Œå‡çº§ä½“éªŒå¤§å¹…æå‡

#### âš¡ å®Œå…¨å¼€æºé€æ˜
- ğŸ”“ æ‰€æœ‰ä¿®æ”¹å…¬å¼€é€æ˜
- ğŸ” æ”¯æŒä»£ç å®¡æŸ¥
- ğŸ”’ æ— ä»»ä½•åé—¨ï¼Œç¡®ä¿ç³»ç»Ÿå®‰å…¨

#### ğŸ”§ æ–°è®¾å¤‡é€‚é…è®¡åˆ’
- ğŸ“ˆ æŒç»­æ‰©å±•è®¾å¤‡æ”¯æŒèŒƒå›´
- ğŸ’¡ æ¬¢è¿ç”¨æˆ·æäº¤è®¾å¤‡é€‚é…éœ€æ±‚
- ğŸ¤ å…±åŒå®Œå–„ç”Ÿæ€å»ºè®¾


### ğŸ“¥ [ç³»ç»Ÿé•œåƒä¸‹è½½](download#ä¸­å›½ä¼˜åŒ–ç‰ˆç³»ç»Ÿé•œåƒä¸‹è½½)
---

## **ğŸ–¥ï¸ Home Assistant Supervised æé€Ÿç‰ˆ**

### ğŸ‘¨â€ğŸ’» ç‰ˆæœ¬ä¿®æ”¹ä½œè€…ï¼š[Alone](https://anlo.ng/)

### âš ï¸ ç³»ç»Ÿè¦æ±‚
è¯·ç¡®ä¿æ‚¨å·²äº†è§£[ç³»ç»Ÿè¦æ±‚](https://github.com/home-assistant/architecture/blob/master/adr/0014-home-assistant-supervised.md)

### ğŸ“– ç®€ä»‹
æ­¤å®‰è£…æ–¹æ³•å¯åœ¨å¸¸è§„æ“ä½œç³»ç»Ÿä¸Šæä¾›å®Œæ•´çš„ Home Assistant ä½“éªŒã€‚è¿™æ„å‘³ç€å°†ä½¿ç”¨ Home Assistant æ–¹æ³•ä¸­çš„æ‰€æœ‰ç»„ä»¶ï¼Œé™¤äº† Home Assistant æ“ä½œç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿå°†è¿è¡Œ Home Assistant Supervisorã€‚Supervisor ä¸ä»…ä»…æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå®ƒæ˜¯ä¸€ä¸ªç®¡ç†æ•´ä¸ªç³»ç»Ÿçš„å®Œæ•´è®¾å¤‡ã€‚å¦‚æœè®¾ç½®ä¸å†ç¬¦åˆé¢„æœŸå€¼ï¼Œå®ƒå°†è¿›è¡Œæ¸…ç†ã€ä¿®å¤æˆ–å°†è®¾ç½®é‡ç½®ä¸ºé»˜è®¤å€¼ã€‚

ç”±äºä¸ä½¿ç”¨ Home Assistant æ“ä½œç³»ç»Ÿï¼Œç”¨æˆ·éœ€è¦è´Ÿè´£ç¡®ä¿æ‰€æœ‰å¿…éœ€çš„ç»„ä»¶éƒ½å·²å®‰è£…å¹¶ç»´æŠ¤ã€‚æ‰€éœ€çš„ç»„ä»¶åŠå…¶ç‰ˆæœ¬ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œå˜åŒ–ã€‚Home Assistant Supervised ä½œä¸ºç¤¾åŒºæ”¯æŒçš„ DIY è§£å†³æ–¹æ¡ˆçš„åŸºç¡€ï¼ŒæŒ‰åŸæ ·æä¾›ã€‚æˆ‘ä»¬åªæ¥å—åœ¨å…¨æ–°å®‰è£…ã€å®Œå…¨æ›´æ–°ä¸”æ²¡æœ‰é¢å¤–è½¯ä»¶åŒ…çš„ Debian ç³»ç»Ÿä¸Šé‡ç°çš„é—®é¢˜çš„é”™è¯¯æŠ¥å‘Šã€‚

æ­¤æ–¹æ³•è¢«è®¤ä¸ºæ˜¯é«˜çº§çš„ï¼Œä»…é€‚ç”¨äºç²¾é€š Linux æ“ä½œç³»ç»Ÿã€Docker å’Œç½‘ç»œç®¡ç†çš„ä¸“å®¶ã€‚

### ğŸ› ï¸ å®‰è£…æŒ‡å—

ä»¥ root èº«ä»½è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆåœ¨å®‰è£…äº† sudo çš„æœºå™¨ä¸Šä½¿ç”¨ `su -` æˆ– `sudo su -`ï¼‰ï¼š

æ­¥éª¤ 1ï¼šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–é¡¹ï¼š

```bash
apt install \
apparmor \
bluez \
cifs-utils \
curl \
dbus \
iproute2 \
jq \
libglib2.0-bin \
lsb-release \
network-manager \
nfs-common \
systemd-journal-remote \
systemd-resolved \
systemd-timesyncd \
udisks2 \
wget -y
```

å¦‚æœæ‚¨ä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡ NetworkManagerï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°æœ‰å…³å¦‚ä½•è®© NetworkManager ç®¡ç†å½“å‰ç½‘ç»œæ¥å£çš„è¯´æ˜ã€‚

```bash
...
Setting up network-manager (1.42.4-1) ...

The following network interfaces were found in /etc/network/interfaces
which means they are currently configured by ifupdown:
- enp1s0
If you want to manage those interfaces with NetworkManager instead
remove their configuration from /etc/network/interfaces.
...
```

åœ¨ç»§ç»­ä¹‹å‰ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼

æ­¥éª¤ 2ï¼šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… Docker-CEï¼š

```bash
curl -fsSL get.docker.com | sh
```

æ­¥éª¤ 3ï¼šå®‰è£… OS-Agentï¼š

OS-Agent çš„å®‰è£…è¯´æ˜å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/home-assistant/os-agent/tree/main#using-home-assistant-supervised-on-debian)æ‰¾åˆ°

æ­¥éª¤ 4ï¼šå®‰è£… Home Assistant Supervised Debian åŒ…ï¼š

```bash
wget -O homeassistant-supervised.deb https://github.com/hasscc/supervised-installer/releases/latest/download/homeassistant-supervised.deb
apt install ./homeassistant-supervised.deb
```

### ğŸ–¥ï¸ æ”¯æŒçš„æœºå™¨ç±»å‹

- generic-x86-64
- odroid-c2
- odroid-c4
- odroid-n2
- odroid-xu
- qemuarm
- qemuarm-64
- qemux86
- qemux86-64
- raspberrypi
- raspberrypi2
- raspberrypi3
- raspberrypi4
- raspberrypi3-64
- raspberrypi4-64
- raspberrypi5-64
- tinker
- khadas-vim3

### âš™ï¸ é…ç½®è¯´æ˜

é»˜è®¤çš„ `$DATA_SHARE` è·¯å¾„æ˜¯ `/var/lib/homeassistant`ï¼ˆä¹‹å‰æ˜¯ `/usr/share/hassio`ï¼‰ã€‚
è¯¥è·¯å¾„ç”¨äºå­˜å‚¨æ‰€æœ‰ä¸ Home Assistant ç›¸å…³çš„å†…å®¹ã€‚

æ‚¨å¯ä»¥åœ¨å®‰è£…æ—¶é€šè¿‡ä»¥ä¸‹æ–¹å¼é‡æ–°é…ç½®è¯¥è·¯å¾„ï¼š

```bash
DATA_SHARE=/my/own/homeassistant dpkg --force-confdef --force-confold -i homeassistant-supervised.deb
```
### ğŸ› ï¸ é—®é¢˜æ’æŸ¥

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ `journalctl -f` æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ã€‚å¦‚æœæ‚¨ä¸ç†Ÿæ‚‰ Linux ç³»ç»ŸåŠå…¶é—®é¢˜æ’æŸ¥æ–¹æ³•ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨ä½¿ç”¨ Home Assistant OSã€‚

## **ğŸ  Home Assistant Supervised(Docker) æé€Ÿç‰ˆ**

### ğŸ‘¨â€ğŸ’» ç‰ˆæœ¬ä¿®æ”¹ä½œè€…ï¼š[Alone](https://anlo.ng/)

> é€šè¿‡Dockerå®‰è£…[Home Assistant Supervised](https://github.com/hasscc/supervised-installer) (HassIO)ï¼Œå¹¶å¯¹å›½å†…ç½‘ç»œç¯å¢ƒè¿›è¡Œä¼˜åŒ–

| ã€€ã€€ã€€ | HAOS | Supervised | Container | Core |
|:-----:|:----:|:----------:|:---------:|:----:|
| è‡ªåŠ¨åŒ– |  âœ…  |     âœ…     |     âœ…    |  âœ…  |
| ä»ªè¡¨ç›˜ |  âœ…  |     âœ…     |     âœ…    |  âœ…  |
| é›†ã€€æˆ |  âœ…  |     âœ…     |     âœ…    |  âœ…  |
| åŠ è½½é¡¹ |  âœ…  |     âœ…     |     âŒ    |  âŒ  |
| å‡ã€€çº§ |  âœ…  |     âœ…     |     âŒ    |  âŒ  |
| å¤‡ã€€ä»½ |  âœ…  |     âœ…     |     âœ…    |  âœ…  |


### ğŸ³ Compose å®‰è£…

```bash
HASSIO=/usr/share/hassio
mkdir -p $HASSIO
cd $HASSIO
wget https://ghrp2.hacs.vip/raw/hasscc/hass-super/main/compose.yml
docker compose up -d
```

> `/usr/share/hassio`ç”¨äºå­˜å‚¨HassIOæ•°æ®ï¼ŒåŒ…æ‹¬HAé…ç½®åŠAdd-onsé…ç½®ç­‰ï¼Œå¯æ›´æ”¹ä¸ºå…¶ä»–è·¯å¾„
> 
> `compose.yml`ä¸­çš„`docker_lib`ç”¨äºå­˜å‚¨HassIOå®¹å™¨åŠé•œåƒç­‰æ•°æ®ï¼Œä¼šå ç”¨è¾ƒå¤§çš„ç©ºé—´ï¼Œä¸”å¯¹å­˜å‚¨é©±åŠ¨æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œä¸è¦æŒ‚è½½åˆ°æœ¬åœ°ç›®å½•
> 
> ä»…å½“`DEFAULT_TZ=Asia/Shanghai`æ—¶æ‰ä¼šå¯¹å›½å†…ç½‘ç»œç¯å¢ƒè¿›è¡Œä¼˜åŒ–


### ğŸ–¥ï¸ å‘½ä»¤å®‰è£…

```bash
# æ–°å»ºç”¨äºå­˜å‚¨å®¹å™¨åŠé•œåƒç­‰æ•°æ®çš„å·ï¼Œå¯¹å­˜å‚¨é©±åŠ¨æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œå› æ­¤ä¸èƒ½æŒ‚è½½åˆ°æœ¬åœ°ç›®å½•
docker volume create hass_super_docker

# è¿è¡Œå®¹å™¨
docker run -d \
  --name hass-super \
  -v /usr/share/hassio:/usr/share/hassio \
  -v /run/dbus:/run/dbus:ro \
  -v hass_super_docker:/var/lib/docker \
  -e DEFAULT_TZ=Asia/Shanghai \
  --device /dev/net/tun \
  --restart unless-stopped \
  --network host \
  --hostname hassio \
  --privileged \
  ghcr.nju.edu.cn/hasscc/hass-super
```

> é¦–æ¬¡å®‰è£…æ—¶ï¼Œéœ€è¦è¾ƒé•¿æ—¶é—´å®‰è£…ç¯å¢ƒåŠæ‹‰å–é•œåƒï¼Œè¯·è€å¿ƒç­‰å¾…
> 
> é€šè¿‡`http://192.168.xx.xx:4357`å¯ä»¥æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
> 
> é€šè¿‡`http://192.168.xx.xx:8123`è¿›å…¥Home Assistant

### ğŸ› ï¸ é—®é¢˜æ’æŸ¥

> å¦‚æœæç¤ºæ— ç½‘ç»œè¿æ¥`no host internet connection`ï¼Œè¯·å°è¯•åœ¨[ç½‘ç»œé…ç½®](https://my.home-assistant.io/redirect/network/)ä¸­ç¦ç”¨IPv6
> 
> å¦‚æœå®‰è£…åè¶…è¿‡10åˆ†é’Ÿä»ç„¶æ— æ³•è¿›å…¥Home Assistantï¼Œè¯·å°è¯•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ—¥å¿—

```bash
docker exec -it hass-super tail -f /tmp/hassio.log -n 500
docker exec -it hass-super journalctl -f -u docker -n 100
docker exec -it hass-super journalctl -f -u hassio-supervisor -n 200
docker exec -it hass-super docker logs -f hassio_supervisor
docker exec -it hass-super ha core info
docker exec -it hass-super ha core start
```


### ğŸ‰ é¸£è°¢
- [NJU Mirror](https://doc.nju.edu.cn/books/e1654/page/ghcr)

